(function(d){d.fn.box=function(a){a=d.extend({move_num:1,display_num:5,margin_num:10,speed:3,times:3,Dom:"div",prev:"#xg-prev",next:"#xg-next",element:"div",auto:!0,allWidth:0,btn:!0},a);return this.each(function(n){function r(){if(g>b)if(c+=f,0!=p&&(c=c==s+f-p?s:c),c<=s)e.animate({left:-c*l},m);else{var a=e.find(h).slice(0,f),d=(g-f)*l-b*l;e.append(a).css("left",-d).animate({left:-(g-b)*l},m);c=g-b}}var e=d(this),f=a.move_num,b=a.display_num,q=a.margin_num,m=a.speed,v=a.times,w=a.prev,x=a.next,h=
a.element,t=a.allWidth,u=a.auto,y=a.btn,g=d(this).find(h).length,z=d(this).find(h).outerHeight(),A=d(this).find(h).outerWidth()*b-0+q*b-0,t=d(this).find(h).outerWidth()*b+q*(b-1)+t,l=d(this).find(h).width()+q;g-b<f&&g>b&&(f=g-b,m/=2);e.wrap("<div class='xg-wraper"+n+"'><div class='xg-container"+n+"'></div></div>").css({position:"absolute",left:0,width:"99999px"});e.closest(".xg-wraper"+n+"").css({position:"relative",width:t,margin:"0 auto 0",overflow:"hidden"});e.find(h).css("margin-right",q);y&&
e.closest(".xg-container"+n+"").before("<a href='javascript:void(0);' id='xg-prev'>prev</a><a href='javascript:void(0);' id='xg-next'>next</a>");e.closest(".xg-container"+n+"").css({position:"relative","z-index":22,height:z,width:A,overflow:"hidden",margin:"0 auto"});if(u)var k=setInterval(r,1E3*v);e.hover(function(){clearInterval(k);k=null},function(){k=setInterval(r,1E3*v)});d(w).stop(!0,!1).on("click",function(){u&&clearInterval(k);k=null;if(!e.is(":animated")&&g-b>=f&&g>b)if(c-=f,0!=p&&(c=c==
p-f?0:c),0<=c)e.animate({left:-c*l},m);else{var a=e.find(h).slice(-f),d=f*l;e.prepend(a).css("left",-d).animate({left:0},m);c=0}});d(x).stop(!0,!1).on("click",function(){u&&clearInterval(k);k=null;!e.is(":animated")&&g-b>=f&&r()});var c=0,s=g-b,p=(g-b)%f})}})(jQuery);